## AI开发关键词

### v1.0版本(底部导航栏)

```
在SwiperIOS/Content/ContentView中搭建框架
 -框架组成：分上下两部分(底部导航栏和内容区)；底部导航栏 位于底部且平分5部分，内容区域占据剩余全部
 -适配：全屏沉浸模式
 -底部导航栏：由5部分组成且平分，
  1-首页(标签文字显示)，页面位于SwiperIOS/Content/ContentView/Home下
  2-图集(标签文字显示)，页面位于SwiperIOS/Content/ContentView/Album下
  3-发布(图片(圆圈加号)，页面位于SwiperIOS/Content/ContentView/Publish下
   点击后弹窗，弹窗从底部弹出，位于界面底部布局，几个选项：1-从相册选择，2-相机，3-写文字，4-取消(与上面有间隔)，每个单独一行
发布弹窗，左上角和右上角有椭圆形弧度，从相册选择/相机/写文字，之间有一条分割线，且点击其中任何一项，弹窗消失
  4-消息(标签文字显示，有消息时显示红点，没有时不显示)，页面位于SwiperIOS/Content/ContentView/Message下
  5-我(标签文字显示),页面位于SwiperIOS/Content/ContentView/Me下
  
 -底部导航切换仿照小红书，点击切换时有缩放效果，默认为首页选中(黑色，1.2倍放大)，切换其他按钮时，其他按钮选中(字体颜色由灰色变为黑色，且有1.2缩放效果)；首页由选中变为未选中(字体由黑色变为灰色，字体大小改为原来大小)
 
 - 弹窗组件页面抽取到：SwiperIOS/Content/view/下
 - 底部导航TabBar组件也抽取到：SwiperIOS/Content/view/下
 底部导航：1-首页(显示文字，不显示图标)；2-图集(显示文字，不显示图标)；3-发布(只显示图标)
；4-消息(显示文字，不显示图标)；5-我(显示文字，不显示图标) 
-消息红点与文字间隔太大，位于消息右上角
-底部导航中发布图标，灰色填充蓝色或红色
上步操作有误，不是中间的十字而是圆圈内填充颜色
中间发布按钮圆填充颜色007AFF，中间的+号填充白色；发布按钮高度约等于其他导航栏标签(文字+图标)效果(虽然没有图标)，垂直方向上剧中对其
底部导航栏标签选中时的文字是未选中时的1.5倍
1.5倍有点大，修改成1.35倍吧
底部导航标签未选中文字大小调大一些，12pt调整为13pt
状态栏未显示，沉浸模式下也显示
弹窗中间隔线的颜色为F2F2F2
弹窗最上面的2个分割线透明度0.4
弹窗最上面的2个分割线高度从0.5修改为1
```

### v2.0版本(网络访问框架)

```
基于最流行的网络访问框架Alamofire进行封装
1、网络请求封装
 -封装目录：SwiperIOS/api目录下
 -baseurl为：https://api.apiopen.top/
 -支持Get、Post等请求
 -支持参数编码和自定义请求头
2、错误处理
-错误枚举：错误类型
3、请求结果：
- 使用AlamofireObjectMapper进行扩展
- 将JSON数据转换为swift对象
- 请求结果封装到：SwiperIOS/api/bean目录下
- 我已写了一个bean示例：VideoData，其他参考此示例
4、真实请求：
- 封装到：SwiperIOS/api/APIService.swift文件下
- 基于SwiperIOS/api/APIClient.swift封装实现功能
- 执行网络请求结果为bean目录下对应实体类(参考VideoData)
- 失败和成功返回结果：参考VideoData
- APIService支持尾随闭包，在页面中调用时直接请求返回结果
- Home.swift页面调用APIService.swift执行真实请求


APIService.swift中添加获取图片列表接口，接口在baseurl后拼接api/images，参数同getVideoList中2个参数，返回结果为ImageData，在Album页面中调用接口测试真实请求

底部导航栏设置颜色，区分内容页面
```

### v3.0 MVC框架改MVVM框架

```
项目框架修改(MVC到MVVM)
1. 修改前(如Home.swift与Album.swift)：逻辑与界面都在一个页面中，混乱且不利于维护
2.修改后：
 - Home与Album文件夹下新增vidwmodel文件夹存放对应的viewmodel(如HomeViewModel与AlbumViewModel)
 - Viewmodel中处理逻辑：如@State修饰的变量与网络请求
 - 页面(如Home.swift与Album.swift)中调用viewmodel并显示界面
 - 自定义页面：自定义界面(如ImageRow或VideoRow)，存放到对应的文件夹/view目录下(如Home/view/VideoRow.swift)
```

### v4.0 首页(Home)仿抖音

1-UI框架描述

```
1.app沉浸式，状态栏透明
2.如果整个页面ContenView是Flex布局，除了底部TabBar，内容区域占据剩余全部内容(flexgrow(1))
3.ContenView或内容区域可以透过状态栏(状态栏显示浮动在上面)
4.内容区域：点击底部标签切换的页面(比如点击首页显示Home，点击图集显示Album)
5.内容区域中页面/首页Home：
 -标签栏(Home/TopTabBar)：1-左搜索+同城/关注/推荐+右加号；2-标签栏(Home/TopTabBar)位于在灵动岛/刘海下方；3-切换互动：支持点击和左右滑动切换
 -标签(同城/关注/推荐)对应页面：同城为City.swift,关注为Focus.swift,推荐为Recommond.swift

6.Home页面/标签页(如推荐页Recommend(默认选中))布局
  -视频:1-全屏填充(平铺整个页面，与Home页以及内容区域等大，从状态栏(状态栏浮动在视频上)到TabBar);2-消除上下页间距；
  -右侧操作栏
  -底部视频栏
  -整个页面(视频+右侧操作栏+底部视频栏)：上下一起滑动
```

2-混合描述

```
 1-显示：
 -app沉浸式，状态栏透明
 -视频从状态栏下(包含)开始显示(状态栏浮于视频上)
 -视频底部恰好停在TabBar顶部(TabBar不覆盖视频画面)
 -TabBar点击交互正常
 -状态栏(日期时间信号等)：1-必须显示；2-不占布局高度；3-作为overlay浮在内容之上；

2.Home页面：

 2.1 顶部标签栏
 -左侧搜索图标+标签(同城、关注、推荐3个标签(优先选中推荐)，相隔30，点击或滑动切换标签，显示对应页面内容)-居中显示+右侧加号图标
 -状态栏标签(同城、关注、推荐)切换时，相应页面也切换显示；并且签切选中
 -浮动在视频区域上，低于灵动岛下(适配安全区域)
 -切换互动：支持点击和左右滑动切换
  -背景色：没有背景色
  -标签切换时：1-视图不被重新创建；2-API只在首次访问时调用1次；3-后续切换同一标签不会再次发起API请求

 2.2 切换标签对应页面
 -顶部标签栏3标签对应3文件位于ContentView/Home/page/下(同城为City.swift,关注为Focus.swift,推荐为Recommond.swift，点击或滑动选中)
 -同样准守MVVM框架：如有自定义View(位于Home/view下)，如有Viewmodel(Home/viewmodel下)

 2.3 标签对应页面布局(仿抖音)
    -页面包含：1-可上下滑动视频组件(同页面(如City.swift)等宽高)；2-右侧操作栏；3-底部视频信息区
    -页面个数： VideoData.data数组大小；视频播放+右侧操作栏+底部都要从VideoInfo(VideoData.data数组当前值)获取

2.4 页面布局-视频组件
    -单页视频，页面等高
    -整页分页效果：上下滑动切换视频；整页滑动；向下滑显示下1个页面信息，向上滑到上1个页面信息；  
    -视图复用：利用LazyVStack的懒加载特性，只渲染当前可见的视频视图，优化性能
   - 手势处理：监听滑动结束事件，触发视频自动播放 / 暂停。
    -翻页：滑动翻页；当前视频+右侧+底部都随着改变 
    -1次滑动只能切换 1 个视频，禁止连续快速滑过多页
    -当前视频完全滑出后才能进入下一页


2.5 视频播放
    -视频地址为：https://api.apiopen.top/api/files/+文件名；
    -视频组件：显示VideoInfo.fileName(拼接地址)，有多个数据时，可上下滑动
   - 默认自动播放
   - 点击暂停，中央显示播放按钮(播放后按钮消失)
   - 加载/卡顿显示 loading，缓存完成自动继续


  2.6 右侧操作栏(位于页面视图右下角(高于BottomTabBar10)，距离右侧10，底部20；下面依次排列，相互间隔20；)
    -顺序：1-用户头像；2-点赞；3-评论；4-收藏；5-分享；6-唱片
      2.6.1 用户头像+关注图标：
           用户头像：显示：VideoInfo.uploader.avatar，若为空显示默认头像
           关注图标：位置：关注图标浮动在头像底部，被头像最底部从中分开；操作：默认未关注(颜色同底部导航栏发布)；点击关注为对号，再点击取消关注为加号；
      -2.6.2 点赞(下方显示,默认是不点赞状态，点击点赞按钮切换到点赞状态，再点击取消点赞)、
      -2.6.3 评论(下方显示)、
      -2.6.4 收藏(下方显示)：图标为5角星，并在bean中添加likesCount，赋值规则为1-10000随机数
      -2.6.5 分享(下方显示)：图标指向右的箭头，赋值sharesCont为1-10000随机数
      -2.6.6 唱片(顺时针旋转)

  2.7 底部视频信息栏(位于视图底部(与右侧操作栏底部对齐)，距离下方20)：
     -@+用户名(即VideoInfo.uploader.nickname)、
     -视频标题(即VideoInfo.originalName)、
     -作者声明(小喇叭 作者声明：内容来源于网络)
     -每个占据一行，左侧对齐


 3. 页面接口：
    -视频接口api/videos，viewmodel使用APIService中定义，有数据返回并将请求到的数据添加到videos
    - 调整接口参数，page为1，size为5；
    - 接口返回：1-点赞数(likesCont为1-10000随机数)；2-评论数(commentsCont为1-10000随机数)；3-分享数(sharesCont为1-10000随机数)；4-都在Bean中赋值
    - 滑动到最后一个视频时：
      --：当[VideoInfo]的大小大于等于VideoData.total时显示没有更多视频了
      --页面加1(page+1)请求下一页数据,并将请求到的数据添加到videos中可以继续滑动
     

 4.项目编译运行：
  -如有项目依赖请使用Podfile；
  -如使用模拟器请使用iPhone 17
```

3-内容修正

```

1.app沉浸式，状态栏透明
2.如果整个页面ContenView是Flex布局，除了底部TabBar，内容区域占据剩余全部内容(flexgrow(1))
3.ContenView或内容区域可以透过状态栏(状态栏显示浮动在上面)
4.内容区域：点击底部标签切换的页面(比如点击首页显示Home，点击图集显示Album)
5.内容区域中页面/首页Home：
 -标签栏(Home/TopTabBar)：1-左搜索+同城/关注/推荐+右加号；2-标签栏(Home/TopTabBar)位于在灵动岛/刘海下方；3-切换互动：支持点击和左右滑动切换
 -标签(同城/关注/推荐)对应页面：同城为City.swift,关注为Focus.swift,推荐为Recommond.swift

6.Home页面/标签页(如推荐页Recommend(默认选中))布局
  -视频:1-全屏填充(平铺整个页面，与Home页以及内容区域等大，从状态栏(状态栏浮动在视频上)到TabBar);2-消除上下页间距；
  -右侧操作栏
  -底部视频栏
  -整个页面(视频+右侧操作栏+底部视频栏)：上下一起滑动

7.内容修正
右侧操作栏：
7.1-用户头像+关注：1-点击关注图标后并不消失图标中间的+符号改为✓符号，其他保持不变
7.2-喜欢点赞：点赞数(VideoInfo.likesCont为1-10000随机数)
7.3-评论：评论数(VideoInfo.commentsCont为1-10000随机数)
7.4-收藏(要新增)：收藏数(VideoInfo.collectCont为1-10000随机数)
7.5-分享：分享数(VideoInfo.shareCont为1-10000随机数)
7.6-唱片(1-顺时针匀速旋转；2-循环)

8.视频播放
8.1.进入app后，视频开始播放(默认)；
8.2.视频(包括切换时)因网络加载时，加载显示；开始播放后加载消失；播放卡顿时，加载也显示，缓存完成后视频开始播放；加载消失
8.3.视频播放状态；点击屏幕中间区域视频暂停播放(播放/暂停按钮显示)；再次点击页面视频继续播放，播放/暂停按钮消失(视频播放/暂停只应用于本页面视频)
8.4.播放/暂停按钮：播放/暂停按钮隐藏不显示，视频上下滑动时，播放/暂停按钮也不显示
8.5.视频播放循环：视频播放完成后，从头开始继续播放；一直循环
8.6.视频播放暂停状态只应用于本页面视频；上/下滑视频时，本页视频播放状态回收；状态不传递其他页面；
8.7.其他页面视频播放逻辑同8.1-8.6

9.底部视频信息栏(修改)
9.1视频标题：1-即VideoInfo.originalName 2-去掉末尾的.mp4
9.2 Music  info: 创作原生(这一行)改为作者声明(小喇叭 作者声明：内容来源于网络)
```

